<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-body">
        <a routerLink="/admin/events/create" class="btn btn-info btn-large">Create new event</a>
        <form role="search" class="app-search hidden-sm-down">

            <select class="form-control" title="Status" (change)="filter($event)">
                <option value="" disabled selected>Status</option>
                <option>EXPIRED</option>
                <option>IN PROGRESS</option>
                <option>INCOMING</option>
            </select>
            <select class="form-control" title="Sort" (change)="sort($event)">
                <option value="" disabled selected>Sort</option>
                <option>ASC</option>
                <option>DESC</option>
            </select>

            <input type="text" placeholder="Search..." class="form-control" (input)="search($event)">
            <a href=""><i class="fa fa-search"></i></a>
        </form>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-6" *ngFor="let event of events">
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">
          {{event.name}}
          <div style="float:right;">
            <button type="button" class="btn btn-info btn-sm" (click)="addQuiz(event.id)">Add quiz</button>
            <button type="button" class="btn btn-warning btn-sm" (click)="editEvent(event.name)">Edit</button>
            <button type="button" class="btn btn-danger btn-sm" (click)="deleteEvent(event.name)">Delete</button>
          </div>
        </h3>
        <h6 class="card-subtitle">{{event.description}}</h6>
        <ngb-tabset>
          <ngb-tab title="Dates">
            <ng-template ngbTabContent>
              <p class="p-t-20">Begins: {{event.startDate}}</p>
              <p class="p-t-20">Ends: {{event.endDate}}</p>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Quizzes">
            <ng-template ngbTabContent>
              <p *ngFor="let quiz of event.quizzes" class="p-t-20">
                {{quiz.id}}
                <span style="float:right"><button type="button" class="btn btn-info btn-sm" (click)="generateQR(quiz.id, content)">Generate
                    QRCode</button></span>
              </p>
            </ng-template>
          </ngb-tab>
          <ngb-tab>
            <ng-template ngbTabTitle><b>Leaderboard</b></ng-template>
            <ng-template ngbTabContent>
              <p class="p-t-20">Leaderboard</p>
            </ng-template>
          </ngb-tab>
          <ngb-tab title="Statistics">
            <ng-template ngbTabContent>
              <p class="p-t-20">Statistics</p>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
    </div>
  </div>

  <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Scan this!</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body" style="margin-left:auto; margin-right:auto">
      <form [formGroup]="emailForm">
        <label class="control-label">User email: </label>
        <input type="email" formControlName="email" class="form-control" (input)="onEmailChange($event)">
      </form>
      <br />
      <div *ngIf="linkForQR">
        <qrcode [qrdata]="linkForQR" [size]="256" [level]="'M'"></qrcode>
      </div>
    </div>
  </ng-template>