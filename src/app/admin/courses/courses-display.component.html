<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-body">
        <a routerLink="/admin/courses/create" class="btn btn-info btn-large">Create new course</a>
        <form role="search" class="app-search hidden-sm-down">

          <select class="form-control" title="Status" (change)="filter($event, sortSelect, searchInput)" #statusSelect>
            <option selected>NONE</option>
            <option *ngFor="let teacher of teachers">{{teacher}}</option>
          </select>
          <select class="form-control" title="Sort" (change)="sort($event, statusSelect, searchInput)" #sortSelect>
            <option selected>NONE</option>
            <option>ASC</option>
            <option>DESC</option>
          </select>

          <input type="text" placeholder="Search..." class="form-control" (input)="search($event, statusSelect, sortSelect)"
            #searchInput>
          <a href=""><i class="fa fa-search"></i></a>
        </form>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-6" *ngFor="let course of courses">
    <div class="card">
      <div class="card-body">
        <h3 class="card-title">
          {{course.name}}
          <div style="float:right;">
            <button type="button" class="btn btn-info btn-sm" (click)="addQuiz(course.id)">Add quiz</button>
            <button type="button" class="btn btn-warning btn-sm" (click)="editCourse(course.id)">Edit</button>
            <button type="button" class="btn btn-danger btn-sm" (click)="deleteCourse(course.id)">Delete</button>
          </div>
        </h3>
        <h6 class="card-subtitle">{{course.description}} - {{course.teacherName}}</h6>
        <ngb-tabset>
          <ngb-tab title="Quizzes">
            <ng-template ngbTabContent>
              <p *ngFor="let quiz of course.quizzes" class="p-t-20">
                {{quiz.name}}
                <span style="float:right"><button type="button" class="btn btn-info btn-sm" (click)="generateQR(quiz.id, content)">Generate
                    QRCode</button></span>
              </p>
            </ng-template>
          </ngb-tab>

          <ngb-tab title="Files">
            <ng-template ngbTabContent>
              <p class="p-t-20" style="float:right;"> <button (click)="uploadnewFile(upload, course)" type="button"
                  class="btn btn-info btn-sm">Upload
                  new file</button></p>
              <div *ngFor="let file of course.files">
                <button style="margin-top: 5px;" type="button" class="btn btn-outline-info btn-sm" (click)="downloadFile(file)">{{file}}</button>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
      </div>
    </div>
  </div>

  <ng-template #content let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Scan this!</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body" style="margin-left:auto; margin-right:auto">
      <form [formGroup]="emailForm">
        <label class="control-label">User email: </label>
        <input type="email" formControlName="email" class="form-control" (input)="onEmailChange($event)">
      </form>
      <br />
      <div *ngIf="linkForQR">
        <qrcode [qrdata]="linkForQR" [size]="256" [level]="'M'"></qrcode>
      </div>
    </div>
  </ng-template>

  <ng-template #upload let-c="close" let-d="dismiss">
    <div class="modal-header">
      <h4 class="modal-title">Upload file for {{course.name}}</h4>
      <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body" style="margin-left:auto; margin-right:auto">
      <form [formGroup]="uploadForm" enctype="multipart/form-data">
        <input type="file" formControlName="file" class="form-control" (input)="uploadFile($event)">
      </form>
      <br />
    </div>
  </ng-template>